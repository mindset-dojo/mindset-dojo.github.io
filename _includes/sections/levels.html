{%- comment -%}
levels section

section.data expects:
  - label:            string            e.g., "Levels"
  - intention_label:  string            e.g., "Intention"
  - edge_label:       string            e.g., "Edge"
  - flows_label:      string            e.g., "Flows"
  - items:            array of level objects

Each level item shape:
  - color:    string    # level color (used by icons/level.svg)
  - label:    string    # level label, e.g., "7th Kyu"
  - level:    number    # keeps your schema for reference
  - intention:string
  - edge:     string
  - flows:    array of {label, url}
{%- endcomment -%}

{%- assign D = section.data -%}
{%- if D.items and D.items.size > 0 -%}
<section class="md-flow">
  <h2>{{ D.label }}</h2>

  {%- for lv in D.items -%}
    <br/>
    <h3>
      {% include icons/level.svg
        class="md-level-svg"
        color=lv.color
        title=lv.label %}
    </h3>

    {%- if D.intention_label and lv.intention -%}
      <p><strong>{{ D.intention_label }}</strong></p>
      <p>{{ lv.intention }}</p>
    {%- endif -%}

    {%- if D.edge_label and lv.edge -%}
      <p><strong>{{ D.edge_label }}</strong></p>
      <p>{{ lv.edge }}</p>
    {%- endif -%}

    {%- if D.flows_label and lv.flows and lv.flows.size > 0 -%}
      <p><strong>{{ D.flows_label }}</strong></p>
      <ul>
        {%- for f in lv.flows -%}
          {%- if f.url | slice: 0, 1 == "/" -%}
            <li>
              <a href="{{ f.url | relative_url }}">
                {{ f.label }}
              </a>
            </li>
          {%- else -%}
            <li>
              <a href="{{ f.url }}">
                {{ f.label }}
              </a>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    {%- endif -%}
  {%- endfor -%}
</section>
{%- endif -%}
